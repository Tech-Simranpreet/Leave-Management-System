{% extends "admin/adashboardbase.html" %}
{% block zcontent %}


<h4>Search Leave Requests</h4>

<form method="post" action="{{ url_for('xiaowei.search_leave_requests') }}">
    <div class="form-group">
        <input type="text" name="search_query" class="form-control" placeholder="Search by name or leave status">
    </div>
    <button type="submit" class="btn btn-primary">Search</button>
</form>

<h5>Search Results</h5>
<div class="table-responsive">
    <table id="table" class="table table-striped table-hover table-bordered" style="width:100%">
        <thead class="table-success">
            <tr>
                <th>Leave Request ID</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Leave Type</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Additional Info</th>
                <th>Hours Requested</th>
                <th>Leave Status</th>
            </tr>
        </thead>
        <tbody>
            {% if results %}
                {% for result in results %}
                    <tr>
                        <td>{{ result[0] }}</td>
                        <td>{{ result[1] }}</td>
                        <td>{{ result[2] }}</td>
                        <td>{{ result[3] }}</td>
                        <td>{{ result[4] }}</td>
                        <td>{{ result[5] }}</td>
                        <td>{{ result[6] }}</td>
                        <td>{{ result[7] }} ({{ result[7] | float // 7.5 }} days)</td>
                        <td>{{ result[8] }}</td>
                    </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="9">No results found.</td>
                </tr>
            {% endif %}
        </tbody>
    </table>
</div>

{% endblock %}
